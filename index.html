<!DOCTYPE html>
<html>
    <head>
        <title>Contact Me</title>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <h1>Contact</h1>

        <section>
            <p>
                Fill the form below to contact me.
            </p>

            <form action="https://formspree.io/f/xeqvnynl" method="POST">
                <h2>Basic Form</h2>

                <label class="number-input" for="first-number">
                    Your First Number
                    <input id="first-number" type="number" name="firstNumber">
                </label>

                <label class="number-input" for="second-number">
                    Your Second Number
                    <input id="second-number" type="number" name="secondNumber">
                </label>

                <p id="output-element"></p>
                <br>

                <label class="short-input" for="nameInput">
                    Name<br>
                    <input id="nameInput" type="text" name="nameInput">
                </label>

                <label class="short-input" for="emailInput">
                    Email
                    <input id="emailInput" type="email" name="emailInput">
                </label>

                <label class="short-input" for="subject">
                    Subject
                    <input id="subject" type="text" name="subject">
                </label>

                <label for="message">
                    Message
                    <input id="message" type="text" name="message">
                </label>

                <label for="homeAddress">
                    Home address
                    <input id="homeAddress" type="text" name="homeAddress">
                </label>

                <button type="submit">Send message</button>
                <a href="second-page.html">Go to second page</a>
            </form>
        </section>
        
        <section>
            <h2>AJAX Form</h2>

            <form id="second-form" action="https://formspree.io/f/xeqvnynl" method="POST">
                <label for="second-email">Email:</label>
                <input type="email" name="email" id="second-email" />

                <label for="second-message">Message:</label>
                <input type="text" name="message" id="second-message" />

                <button id="second-form-button">Submit</button>
                <p id="second-form-status"></p>
            </form>
        </section>

        <script>
            var firstNumber;
            var secondNumber;

            var outputElement = document.getElementById('output-element');

            function showSumOfNumbers() {
                if (firstNumber && secondNumber) {
                    var sumOfNumbers = firstNumber + secondNumber;
                    var outputMessage = `The sum of the two numbers is ${sumOfNumbers}`;

                    console.log(outputMessage);
                    outputElement.innerText = outputMessage;
                } else {
                    var outputMessage = 'Enter first and second number to see the sum';

                    console.log(outputMessage);
                    outputElement.innerText = outputMessage;
                }
            }

            var firstNumberInput = document.getElementById('first-number');
            firstNumberInput.addEventListener('input', function retrieveFirstNumber(event) {
                firstNumber = parseInt(event.target.value);
                showSumOfNumbers();
            });

            var secondNumberInput = document.getElementById('second-number');
            secondNumberInput.addEventListener('input', function retrieveSecondNumber(event) {
                secondNumber = parseInt(event.target.value);
                showSumOfNumbers();
            });
        </script>

        <script>
            var form = document.getElementById("second-form");
            
            function handleSubmit(event) {
                event.preventDefault();

                var status = document.getElementById("second-form-status");

                var requestData = {
                    method: form.method,
                    body: new FormData(event.target),
                    headers: {
                        'Accept': 'application/json'
                    }
                };

                fetch(event.target.action, requestData).then(function (response) {
                    status.innerHTML = "Thanks for your submission!";
                    form.reset()
                }).catch(function (error) {
                    status.innerHTML = "Oops! There was a problem submitting your form"
                });
            }

            form.addEventListener("submit", handleSubmit)
        </script>
    </body>
</html>